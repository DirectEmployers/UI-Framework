{% extends "base.html" %}

{% block heading %}
<h1>Profile: {{ user.first_name }} {{ user.last_name }}</h1>
{% endblock heading %}

{% block main-text %}
<div>
  <table class="zebra-striped">
      <thead>
	<tr>
	  <th colspan="2">Details</th>
	</tr>
      </thead>
    <tbody>
      {% if user.is_staff %}
      <tr><td>Id:</td> <td>{{ user.id }}</td></tr>
      {% endif %}
      <tr><td>Username:</td> <td>{{ user.username }}</td></tr>
      <tr><td>Email:</td> <td>{{ user.email|default:"Not provided" }}</td></tr>
      <tr><td>First name:</td> <td>{{ user.first_name|default:"Not provided" }}</td></tr>
      <tr><td>Last name:</td> <td>{{ user.last_name|default:"Not provided" }}</td></tr>
      <tr><td>Last login backend:</td> <td>{{ last_login }}</td></tr>
     </tbody>
  </table>
</div>

<div>
{% if social_auth.associated %}
  <h3>Connected Sites</h3>
  <p>If you are logged in to any of the following websites, you will
  be logged into my.jobs automatically.</p>

  <table>
   <tbody>
    {% for type, accounts in social_auth.associated.items %}
      {% for account in accounts %}
      <tr>
        <th>{{ account.provider|title }}</th><th><a class="btn danger"
    href={% url socialauth_disconnect_individual account.provider account.id %}>Disconnect</a> (ID {{ account.id }})</th>
      </tr>
      {% endfor %}
    {% endfor %}
    </tbody>
    <caption>
      <span class="help-block">
        <strong>Note:</strong>You can re-connect your website accounts later. 
      </span>
   </caption>
  </table>
{% endif %}
  
  <h3>Connect New Sites</h3>
  
  <ul>
  {% for name in social_auth.backends.oauth %}
    <li><a rel="nofollow" href="{% url socialauth_associate_begin name %}">{{ name|title }}</a></li>
  {% endfor %}
  </ul>

  <h3>Associate new <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-10" title="OAuth2">OAuth2</a> credentials:</h3>
  <ul>
  {% for name in social_auth.backends.oauth2 %}
    <li><a rel="nofollow" href="{% url socialauth_associate_begin name %}">{{ name|title }}</a></li>
  {% endfor %}
  </ul>

  <h3>Associate new <a href="http://openid.net/" title="OpenId">OpenId</a> credentials:</h3>
  <ul>
  {% for name in social_auth.backends.openid %}
    <li>
    {% if name != "livejournal" and name != "openid" %}
      <a rel="nofollow" href="{% url socialauth_associate_begin name %}">{{ name|title }}</a>
    {% else %}
      {% if name == "livejournal" %}
      <form action="{% url socialauth_associate_begin "livejournal" %}" method="post">{% csrf_token %}
        <div>
          <label for="openid_lj_user">LiveJournal user:</label>
          <input id="openid_lj_user" type="text" value="" name="openid_lj_user" />
          <input type="submit" value="Login"/>
        </div>
      </form>
      {% else %}
        {% if name == "openid" %}
        <form action="{% url socialauth_associate_begin "openid" %}" method="post">{% csrf_token %}
          <div>
            <label for="openid_identifier">Other provider</label>
            <input id="openid_identifier" type="text" value="" name="openid_identifier" />
            <input type="submit" value="Login" />
          </div>
          <p class="helptext">Like your personal <a href="https://www.myopenid.com/" title="My OpenId">myopenid</a></p>
        </form>
        {% endif %}
      {% endif %}
    {% endif %}
    </li>
  {% endfor %}
  </ul>
</div>
{% endblock main-text %}

{% block sidebar-a-text %}
  <div class="alert-message block-message info">{% include "content-direct-employers.html" %}</div>
{% endblock sidebar-a-text %}